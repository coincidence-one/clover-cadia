# ğŸ—ï¸ Architecture Documentation (ê°œë°œ ì•„í‚¤í…ì²˜)

ì´ ë¬¸ì„œëŠ” **CloverCadia (Pixel Bet)** í”„ë¡œì íŠ¸ì˜ ê¸°ìˆ ì  êµ¬ì¡°ì™€ ì„¤ê³„ ê²°ì •ì„ ì„¤ëª…í•©ë‹ˆë‹¤.

## 1. ğŸ“‚ ë””ë ‰í† ë¦¬ êµ¬ì¡° (Directory Structure)

í”„ë¡œì íŠ¸ëŠ” **Next.js App Router** êµ¬ì¡°ë¥¼ ë”°ë¥´ë©°, ê²Œì„ ë¡œì§ê³¼ UIê°€ ëª…í™•íˆ ë¶„ë¦¬ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

```
/
â”œâ”€â”€ app/                    # Next.js App Router ë©”ì¸
â”‚   â”œâ”€â”€ components/         # í˜ì´ì§€ ì¢…ì†ì  ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ constants/          # ê²Œì„ ìƒìˆ˜ ë° ì„¤ì • ë°ì´í„° (ë°¸ëŸ°ìŠ¤ ë“±)
â”‚   â”œâ”€â”€ contexts/           # Global Context Providers (Auth, Locale)
â”‚   â”œâ”€â”€ hooks/              # âœ¨ ì½”ì–´ ê²Œì„ ë¡œì§ (Custom Hooks)
â”‚   â”œâ”€â”€ lobby/              # ë¡œë¹„ í˜ì´ì§€ ë¼ìš°íŠ¸
â”‚   â”œâ”€â”€ login/              # ë¡œê·¸ì¸ í˜ì´ì§€ ë¼ìš°íŠ¸
â”‚   â”œâ”€â”€ types/              # TypeScript íƒ€ì… ì •ì˜
â”‚   â”œâ”€â”€ layout.tsx          # Root Layout (í°íŠ¸, ì „ì—­ ìŠ¤íƒ€ì¼)
â”‚   â””â”€â”€ page.tsx            # ë©”ì¸ ê²Œì„ í™”ë©´
â”œâ”€â”€ components/
â”‚   â””â”€â”€ ui/
â”‚       â””â”€â”€ 8bit/           # ğŸ‘¾ ë ˆíŠ¸ë¡œ ìŠ¤íƒ€ì¼ ì „ìš© UI ì»´í¬ë„ŒíŠ¸ (Button, Panel ë“±)
â”œâ”€â”€ lib/                    # ì™¸ë¶€ ì„œë¹„ìŠ¤ ì—°ë™ (Supabase ë“±)
â””â”€â”€ public/                 # ì •ì  ì—ì…‹
```

---

## 2. ğŸ§© í•µì‹¬ ë””ìì¸ íŒ¨í„´ (Core Design Patterns)

### 2.1 ê²Œì„ ì—”ì§„ (Game Engine via Custom Hooks)
ì´ ê²Œì„ì€ **ì „í†µì ì¸ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬(Redux, Zustand ë“±) ëŒ€ì‹ **, **ê±°ëŒ€ Custom Hook íŒ¨í„´**ì„ ì‚¬ìš©í•˜ì—¬ ê²Œì„ ìƒíƒœë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.

*   **`useSlotMachine` (Root Hook)**: ê²Œì„ì˜ ìƒíƒœ ì €ì¥ì†Œì´ì ì»¨íŠ¸ë¡¤ëŸ¬ ì—­í• ì„ í•˜ëŠ” ìµœìƒìœ„ í›…ì…ë‹ˆë‹¤.
    *   **ì—­í• :** ì „ì²´ `GameState`ë¥¼ ê´€ë¦¬í•˜ê³ , í•˜ìœ„ í›…ë“¤ì„ ì¡°í•©(Compose)í•˜ì—¬ `actions` ê°ì²´ë¥¼ UIì— ë…¸ì¶œí•©ë‹ˆë‹¤.
    *   **ì˜ì†ì„±:** `localStorage`ë¥¼ í†µí•´ ë¸Œë¼ìš°ì € ìƒˆë¡œê³ ì¹¨ ì‹œì—ë„ ê²Œì„ ìƒíƒœë¥¼ ë³µêµ¬í•©ë‹ˆë‹¤ (í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ì €ì¥).

*   **Sub-Hooks (ëª¨ë“ˆí™”)**: ë³µì¡í•œ ë¡œì§ì€ ë³„ë„ í›…ìœ¼ë¡œ ë¶„ë¦¬ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
    *   `useRoundSystem`: ë¼ìš´ë“œ ì§„í–‰, ë‚ ì§œ ê²½ê³¼, ë ˆë²¨ì—… ë¡œì§.
    *   `useSpinLogic`: ìŠ¬ë¡¯ ë¨¸ì‹  ìŠ¤í•€ ì•Œê³ ë¦¬ì¦˜, ë‹¹ì²¨ íŒì •, ê·¸ë¦¬ë“œ ìƒì„±.
    *   `useGameEconomy`: ìƒì , ì¬í™”(ì½”ì¸/í‹°ì¼“) ê´€ë¦¬.
    *   `useTalismanSystem`: ë¶€ì (ì•„ì´í…œ) êµ¬ë§¤ ë° íš¨ê³¼ ì ìš©.

### 2.2 ì»´í¬ë„ŒíŠ¸ ì„¤ê³„ (Component Design)
*   **Atomic Design ë³€í˜•:** ì¼ë°˜ì ì¸ UI ë¼ì´ë¸ŒëŸ¬ë¦¬ ì»´í¬ë„ŒíŠ¸ì™€ ê²Œì„ íŠ¹í™” ì»´í¬ë„ŒíŠ¸ê°€ ë¶„ë¦¬ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
*   **8bit UI:** `components/ui/8bit/` í´ë”ì—ëŠ” í”½ì…€ ì•„íŠ¸ ìŠ¤íƒ€ì¼ì´ ì ìš©ëœ ë²„íŠ¼, íŒ¨ë„, ëª¨ë‹¬ ë“±ì´ ëª¨ì—¬ ìˆì–´ ì¼ê´€ëœ ë ˆíŠ¸ë¡œ ë£©ì•¤í•„ì„ ìœ ì§€í•©ë‹ˆë‹¤.

---

## 3. ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ ìƒì„¸ (Tech Stack Details)

### 3.1 í”„ë ˆì„ì›Œí¬ & ì–¸ì–´
*   **Next.js 16 (App Router):** ìµœì‹  React ê¸°ëŠ¥ì„ í™œìš©í•˜ë©°, ì„œë²„ ì»´í¬ë„ŒíŠ¸ì™€ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ì ì ˆíˆ í˜¼í•©í•©ë‹ˆë‹¤.
*   **TypeScript:** ì—„ê²©í•œ íƒ€ì… ì•ˆì •ì„±ì„ ë³´ì¥í•©ë‹ˆë‹¤. íŠ¹íˆ `GameState` ì¸í„°í˜ì´ìŠ¤ê°€ ì „ì²´ ë°ì´í„° ëª¨ë¸ì˜ í•µì‹¬ì…ë‹ˆë‹¤.

### 3.2 ìŠ¤íƒ€ì¼ë§ (Styling)
*   **Tailwind CSS v4:** ìœ í‹¸ë¦¬í‹° í¼ìŠ¤íŠ¸ CSS.
*   **Pixel Art:** ì»¤ìŠ¤í…€ í°íŠ¸(`Press Start 2P`)ì™€ `pixelated` ì´ë¯¸ì§€ ë Œë”ë§ ì„¤ì •ì„ í†µí•´ ë ˆíŠ¸ë¡œ ê°ì„±ì„ êµ¬í˜„í•©ë‹ˆë‹¤.

### 3.3 ìƒíƒœ ê´€ë¦¬ & ë°ì´í„° (State & Data)
*   **Local State:** ê²Œì„ ì§„í–‰ ìƒí™©ì€ í´ë¼ì´ì–¸íŠ¸ì˜ `localStorage`ì— ì €ì¥ë˜ì–´ ì˜¤í”„ë¼ì¸ì—ì„œë„(ì„¸ì…˜ ê°„) ìœ ì§€ë©ë‹ˆë‹¤.
*   **Global State:** ë‹¤êµ­ì–´(`LocaleContext`)ì™€ ì¸ì¦(`AuthContext`) ë“± ì „ì—­ì ì¸ ì„¤ì •ë§Œ Context APIë¡œ ê´€ë¦¬í•©ë‹ˆë‹¤.
*   **Backend:** Supabaseë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ì ì¸ì¦ ë° í´ë¼ìš°ë“œ ë°ì´í„° ì €ì¥ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.

---

## 4. ğŸ”„ ë°ì´í„° íë¦„ (Data Flow)

1.  **Action:** ì‚¬ìš©ìê°€ `Spin` ë²„íŠ¼ì„ ëˆ„ë¦„.
2.  **Hook Layer:** `useSlotMachine` -> `actions.spin()` í˜¸ì¶œ -> `useSpinLogic` ë‚´ë¶€ ë¡œì§ ì‹¤í–‰.
3.  **State Update:** `setState`ë¥¼ í†µí•´  ã…‡`grid`, `spinsLeft`, `coins` ë“±ì˜ ìƒíƒœ ë³€ê²½.
4.  **Re-render:** ë³€ê²½ëœ ìƒíƒœê°€ UI ì»´í¬ë„ŒíŠ¸(ìŠ¬ë¡¯ ê·¸ë¦¬ë“œ, HUD)ì— ì „íŒŒë˜ì–´ í™”ë©´ ê°±ì‹ .
5.  **Persist:** `useEffect`ê°€ ìƒíƒœ ë³€ê²½ì„ ê°ì§€í•˜ê³  `localStorage` ë™ê¸°í™”.
